(this.webpackJsonpkrishiYantra=this.webpackJsonpkrishiYantra||[]).push([[0],{118:function(e,t,c){"use strict";c.r(t);var n=c(3),a=c(18),r=c.n(a),s=c(6),o=c(12),i=c(14),l=c(5),d=c(7),j="/api",u=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},b=function(e){"undefined"!==typeof window&&(localStorage.removeItem("cart"),e())},m=c.p+"static/media/AWARE1.75ae866a.jpg",h=c(1),p=function(e,t){return e.location.pathname===t?{color:"#ff9900"}:{color:"white"}},O=Object(o.g)((function(e){var t=e.history;return Object(h.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-light",id:"my-navigation-front",children:[Object(h.jsxs)(s.b,{className:"navbar-brand",to:"/",children:[Object(h.jsx)("img",{src:m,className:"d-inline-block align-top",style:{width:70,height:50},alt:""}),"KrishiYantra"]}),Object(h.jsx)("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(h.jsx)("span",{class:"navbar-toggler-icon"})}),Object(h.jsx)("div",{class:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(h.jsxs)("ul",{class:"navbar-nav ml-auto",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(s.b,{className:"nav-link",style:p(t,"/"),to:"/",children:"Home"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(s.b,{className:"nav-link",style:p(t,"/shop"),to:"/shop",children:"Shop"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsxs)(s.b,{className:"nav-link",style:p(t,"/cart"),to:"/cart",children:["Cart"," ",Object(h.jsx)("sup",{children:Object(h.jsx)("small",{className:"cart-badge",children:"undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0})})]})}),u()&&0===u().user.role&&Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(s.b,{className:"nav-link",style:p(t,"/user/dashboard"),to:"/user/dashboard",children:"Dashboard"})}),u()&&1===u().user.role&&Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(s.b,{className:"nav-link",style:p(t,"/admin/dashboard"),to:"/admin/dashboard",children:"Dashboard"})}),!u()&&Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(s.b,{className:"nav-link",style:p(t,"/signin"),to:"/signin",children:"Signin"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(s.b,{className:"nav-link",style:p(t,"/signup"),to:"/signup",children:"Signup"})})]}),u()&&Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("span",{className:"nav-link",style:{cursor:"pointer",color:"#ffffff"},onClick:function(){return function(e){if("undefined"!==typeof window)return localStorage.removeItem("jwt"),e(),fetch("".concat(j,"/signout"),{method:"GET"}).then((function(e){console.log("signout",e)})).catch((function(e){return console.log(e)}))}((function(){t.push("/")}))},children:"Signout"})})]})})]})})),x=c(16),f=function(){return Object(h.jsxs)(x.e,{color:"blue-grey",className:"page-footer font-small lighten-5 pt-0",children:[Object(h.jsx)("div",{style:{backgroundColor:"#21d192"},children:Object(h.jsx)(x.d,{children:Object(h.jsxs)(x.j,{className:"py-4 d-flex align-items-center",children:[Object(h.jsx)(x.c,{md:"6",lg:"5",className:"text-center text-md-left mb-4 mb-md-0",children:Object(h.jsx)("h6",{className:"mb-0 white-text",children:"Get connected with us on social networks!"})}),Object(h.jsxs)(x.c,{md:"6",lg:"7",className:"text-center text-md-right",children:[Object(h.jsx)(s.b,{className:"fb-ic ml-0",children:Object(h.jsx)("i",{className:"fab fa-facebook-f white-text mr-lg-4",children:" "})}),Object(h.jsx)(s.b,{className:"tw-ic",children:Object(h.jsx)("i",{className:"fab fa-twitter white-text mr-lg-4",children:" "})}),Object(h.jsx)(s.b,{className:"gplus-ic",children:Object(h.jsx)("i",{className:"fab fa-google-plus-g white-text mr-lg-4",children:" "})}),Object(h.jsx)(s.b,{className:"li-ic",children:Object(h.jsx)("i",{className:"fab fa-linkedin-in white-text mr-lg-4",children:" "})}),Object(h.jsx)(s.b,{className:"ins-ic",children:Object(h.jsx)("i",{className:"fab fa-instagram white-text mr-lg-4",children:" "})})]})]})})}),Object(h.jsx)(x.d,{className:"mt-5 mb-4 text-center text-md-left",children:Object(h.jsxs)(x.j,{className:"mt-3",children:[Object(h.jsxs)(x.c,{md:"3",lg:"4",xl:"3",className:"mb-4 dark-grey-text",children:[Object(h.jsx)("h6",{className:"text-uppercase font-weight-bold",children:Object(h.jsx)("strong",{children:"KrishiYantra"})}),Object(h.jsx)("hr",{className:"deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto",style:{width:"60px"}}),Object(h.jsx)("p",{children:"An effective Agric-E-commerce solution that extend business by increasing opportunities with customers, suppliers and other farms & personalized services to individuals who visit the site more easily than larger farms."})]}),Object(h.jsxs)(x.c,{md:"2",lg:"2",xl:"2",className:"mb-4 dark-grey-text",children:[Object(h.jsx)("h6",{className:"text-uppercase font-weight-bold",children:Object(h.jsx)("strong",{children:"Products"})}),Object(h.jsx)("hr",{className:"deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto",style:{width:"60px"}}),Object(h.jsx)("p",{children:Object(h.jsx)(s.b,{to:"./shop",className:"dark-grey-text",children:"Vegetables & Fruit"})}),Object(h.jsx)("p",{children:Object(h.jsx)(s.b,{to:"./shop",className:"dark-grey-text",children:"Beverages"})}),Object(h.jsx)("p",{children:Object(h.jsx)(s.b,{to:"./shop",className:"dark-grey-text",children:"Splices"})}),Object(h.jsx)("p",{children:Object(h.jsx)(s.b,{to:"./shop",className:"dark-grey-text",children:"Grains"})})]}),Object(h.jsxs)(x.c,{md:"3",lg:"2",xl:"2",className:"mb-4 dark-grey-text",children:[Object(h.jsx)("h6",{className:"text-uppercase font-weight-bold",children:Object(h.jsx)("strong",{children:"Useful links"})}),Object(h.jsx)("hr",{className:"deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto",style:{width:"60px"}}),Object(h.jsx)("p",{children:Object(h.jsx)(s.b,{to:"./../user/dashboard",className:"dark-grey-text",children:"Your Account"})}),Object(h.jsx)("p",{children:Object(h.jsx)(s.b,{to:"#",className:"dark-grey-text",children:"Become an Affiliate"})}),Object(h.jsx)("p",{children:Object(h.jsx)(s.b,{to:"",className:"dark-grey-text",children:"Shipping Rates"})}),Object(h.jsx)("p",{children:Object(h.jsx)(s.b,{to:"#",className:"dark-grey-text",children:"Help"})})]}),Object(h.jsxs)(x.c,{md:"4",lg:"3",xl:"3",className:"mb-4 dark-grey-text",children:[Object(h.jsx)("h6",{className:"text-uppercase font-weight-bold",children:Object(h.jsx)("strong",{children:"Contact"})}),Object(h.jsx)("hr",{className:"deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto",style:{width:"60px"}}),Object(h.jsxs)("p",{children:[Object(h.jsx)("i",{className:"fa fa-home mr-3"})," Abohar, Punjab 152116, India"]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("i",{className:"fa fa-envelope mr-3"})," shivamaggarwal2042001@gmail.com"]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("i",{className:"fa fa-phone mr-3"})," + 01 234 567 88"]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("i",{className:"fa fa-print mr-3"})," + 01 234 567 89"]})]})]})}),Object(h.jsx)("div",{className:"footer-copyright text-center py-3",children:Object(h.jsxs)(x.d,{fluid:!0,children:["\xa9 ",(new Date).getFullYear()," Copyright:"," ",Object(h.jsx)(s.b,{to:"https://github.com/shsarv",children:" https://www.linkedin.com/in/shivam-goyal-427b431b1/"})]})})]})},g=(c(90),c(91),c(92),c(93),function(e){var t=e.title,c=void 0===t?"Title":t,n=e.description,a=void 0===n?"Description":n,r=e.className,s=e.children;return Object(h.jsxs)("div",{children:[Object(h.jsx)(O,{}),Object(h.jsxs)("div",{className:"jumbotron-me",children:[Object(h.jsx)("h2",{className:"font-weight-bold font-italic",children:c}),Object(h.jsx)("p",{className:"lead font-weight-bold italic",children:a})]}),Object(h.jsx)("div",{className:r,children:s}),Object(h.jsx)(f,{})]})}),N=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(d.a)(e,2),c=t[0],a=t[1],r=c.name,o=c.email,u=c.password,b=c.success,m=c.error,p=function(e){return function(t){a(Object(l.a)(Object(l.a)({},c),{},Object(i.a)({error:!1},e,t.target.value)))}},O=function(e){var t;e.preventDefault(),a(Object(l.a)(Object(l.a)({},c),{},{error:!1})),(t={name:r,email:o,password:u},fetch("".concat(j,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))).then((function(e){e.error?a(Object(l.a)(Object(l.a)({},c),{},{error:e.error,success:!1})):a(Object(l.a)(Object(l.a)({},c),{},{name:"",email:"",password:"",error:"",success:!0}))}))};return Object(h.jsxs)(g,{title:"Signup to KrishiYantra",description:"Hii, please create an account to continue.. while KrishiYantra find best recommendation for you.",className:"container col-md-8 offset-md-2",children:[Object(h.jsxs)("div",{className:"alert alert-info",style:{display:b?"":"none"},children:["New account is created. Please ",Object(h.jsx)(s.b,{to:"/signin",children:"Signin"})]}),Object(h.jsx)("div",{className:"alert alert-danger",style:{display:m?"":"none"},children:m}),Object(h.jsx)("div",{className:"row",id:"signup",children:Object(h.jsxs)("div",{className:"col-md-6 offset-3",id:"signup-form",children:[Object(h.jsx)("div",{children:Object(h.jsx)("h1",{children:"SignUp"})}),Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Name"}),Object(h.jsx)("input",{onChange:p("name"),type:"text",className:"form-control",value:r})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Email"}),Object(h.jsx)("input",{onChange:p("email"),type:"email",className:"form-control",value:o})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Password"}),Object(h.jsx)("input",{onChange:p("password"),type:"password",className:"form-control",value:u})]}),Object(h.jsx)("button",{onClick:O,className:"btn btn-primary",children:"Submit"})]})]})})]})},v=function(){var e=Object(n.useState)({email:"",password:"",error:"",loading:!1,redirectToReferrer:!1}),t=Object(d.a)(e,2),c=t[0],a=t[1],r=c.email,s=c.password,b=c.loading,p=c.error,O=c.redirectToReferrer,x=u().user,f=function(e){return function(t){a(Object(l.a)(Object(l.a)({},c),{},Object(i.a)({error:!1},e,t.target.value)))}},N=function(e){e.preventDefault(),a(Object(l.a)(Object(l.a)({},c),{},{error:!1,loading:!0})),function(e){return fetch("".concat(j,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}({email:r,password:s}).then((function(e){e.error?a(Object(l.a)(Object(l.a)({},c),{},{error:e.error,loading:!1})):function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){a(Object(l.a)(Object(l.a)({},c),{},{redirectToReferrer:!0}))}))}))};return Object(h.jsxs)(g,{title:"Welcome back Organictarian !!",description:"Please Signin to Continue.....",className:"container col-md-8 offset-md-2",children:[b&&Object(h.jsx)("div",{className:"alert alert-info",children:Object(h.jsx)("h2",{children:"Loading..."})}),Object(h.jsx)("div",{className:"alert alert-danger",style:{display:p?"":"none"},children:p}),Object(h.jsxs)("div",{className:"row signin p-4 m-4 rounded shadow-lg ",children:[Object(h.jsxs)("div",{className:"col-md-5 signin-form p-3 rounded-left shadow-lg offset-md-1 border-right",children:[Object(h.jsx)("div",{children:Object(h.jsx)("h1",{className:"text-center font-weight-bold p-2 m-3 h2 shadow-lg rounded",children:"Signin"})}),Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"form-group mt-3",children:[Object(h.jsx)("label",{className:"text-muted font-weight-bold",children:"Email"}),Object(h.jsx)("input",{onChange:f("email"),type:"email",className:"form-control",value:r})]}),Object(h.jsxs)("div",{className:"form-group mt-3",children:[Object(h.jsx)("label",{className:"text-muted font-weight-bold",children:"Password"}),Object(h.jsx)("input",{onChange:f("password"),type:"password",className:"form-control",value:s})]}),Object(h.jsx)("button",{onClick:N,className:"btn btn-primary rounded font-weight-bold",children:"Submit"})]})]}),Object(h.jsx)("div",{className:"col-md-5 signin-description p-3 rounded-right shadow-lg border-gray",children:Object(h.jsx)("img",{src:m,alt:"logo",className:"img-fluid"})})]}),O?x&&1===x.role?Object(h.jsx)(o.a,{to:"/admin/dashboard"}):Object(h.jsx)(o.a,{to:"/user/dashboard"}):u()?Object(h.jsx)(o.a,{to:"/"}):void 0]})},y=c(60),w=c.n(y),S=function(e){return fetch("".concat(j,"/products?sortBy=").concat(e,"&order=desc&limit=8"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},k=function(){return fetch("".concat(j,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},C=function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={limit:t,skip:e,filters:c};return fetch("".concat(j,"/products/by/search"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},P=function(e,t,c){return fetch("".concat(j,"/order/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({order:c})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},T=function(e){var t=e.item,c=e.url;return Object(h.jsx)("div",{className:"product-img",children:Object(h.jsx)("div",{className:"d-flex justify-content-center",children:Object(h.jsx)("img",{src:"".concat(j,"/").concat(c,"/photo/").concat(t._id),alt:t.name,className:"mb-3",style:{maxHeight:"100%",maxWidth:"100%"}})})})},A=c(22),I=c.n(A),_=function(e){var t,c=e.product,a=e.showViewProductButton,r=void 0===a||a,i=e.showAddToCartButton,j=void 0===i||i,u=e.cartUpdate,b=void 0!==u&&u,m=e.showRemoveProductButton,p=void 0!==m&&m,O=e.setRun,x=void 0===O?function(e){return e}:O,f=e.run,g=void 0===f?void 0:f,N=Object(n.useState)(!1),v=Object(d.a)(N,2),y=v[0],w=v[1],S=Object(n.useState)(c.count),k=Object(d.a)(S,2),C=k[0],P=k[1],A=function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},c=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.push(Object(l.a)(Object(l.a)({},e),{},{count:1})),c=Array.from(new Set(c.map((function(e){return e._id})))).map((function(e){return c.find((function(t){return t._id===e}))})),localStorage.setItem("cart",JSON.stringify(c)),t())}(c,w(!0))},_=function(e){return function(t){x(!g),P(t.target.value<1?1:t.target.value),t.target.value>=1&&function(e,t){var c=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.map((function(n,a){return n._id===e&&(c[a].count=t),console.log("counting done")})),localStorage.setItem("cart",JSON.stringify(c)))}(e,t.target.value)}};return Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("div",{className:"card-header card-header-1 ",children:c.name}),Object(h.jsxs)("div",{className:"card-body",children:[function(e){if(e)return Object(h.jsx)(o.a,{to:"/cart"})}(y),Object(h.jsx)(T,{item:c,url:"product"}),Object(h.jsxs)("p",{className:"card-p  mt-2",id:"card-product-description",children:[c.description," "]}),Object(h.jsxs)("p",{className:"card-p black-10",children:["\u20b9 ",c.price]}),Object(h.jsxs)("p",{className:"black-9",children:["Category: ",c.category&&c.category.name]}),Object(h.jsxs)("p",{className:"black-8",children:["Added on ",I()(c.createdAt).fromNow()]}),(t=c.quantity,t>0?Object(h.jsx)("span",{className:"badge badge-primary badge-pill",children:"In Stock "}):Object(h.jsx)("span",{className:"badge badge-primary badge-pill",children:"Out of Stock "})),Object(h.jsx)("br",{}),function(e){return e&&Object(h.jsx)(s.b,{to:"/product/".concat(c._id),className:"mr-2",children:Object(h.jsx)("button",{className:"btn btn-outline-primary mt-2 mb-2 card-btn-1",id:"view-product",children:"View Product"})})}(r),function(e){return e&&Object(h.jsx)("button",{onClick:A,className:"btn btn-outline-warning mt-2 mb-2 card-btn-1 ",id:"add-to-cart",children:"Add to cart"})}(j),function(e){return e&&Object(h.jsx)("button",{onClick:function(){!function(e){var t=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(c,n){return c._id===e&&t.splice(n,1),console.log("cart splice done")})),localStorage.setItem("cart",JSON.stringify(t)))}(c._id),x(!g)},className:"btn btn-outline-danger mt-2 mb-2",children:"Remove Product"})}(p),function(e){return e&&Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"input-group mb-3",children:[Object(h.jsx)("div",{className:"input-group-prepend",children:Object(h.jsx)("span",{className:"input-group-text",children:"Adjust Quantity"})}),Object(h.jsx)("input",{type:"number",className:"form-control",value:C,onChange:_(c._id)})]})})}(b)]})]})},E=function(){var e=Object(n.useState)({categories:[],category:"",search:"",results:[],searched:!1}),t=Object(d.a)(e,2),c=t[0],a=t[1],r=c.categories,s=c.category,o=c.search,u=c.results,b=c.searched;Object(n.useEffect)((function(){k().then((function(e){e&&e.error?console.log(e.error):a(Object(l.a)(Object(l.a)({},e),{},{categories:e}))}))}),[]);var m=function(){o&&function(e){var t=w.a.stringify(e);return console.log("query",t),fetch("".concat(j,"/products/search?").concat(t),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({search:o||void 0,category:s}).then((function(e){e.error?console.log(e.error):a(Object(l.a)(Object(l.a)({},c),{},{results:e,searched:!0}))}))},p=function(e){e.preventDefault(),m()},O=function(e){return function(t){var n;a(Object(l.a)(Object(l.a)({},c),{},(n={},Object(i.a)(n,e,t.target.value),Object(i.a)(n,"searched",!1),n)))}},x=function(e,t){return e&&t.length>0?"Found ".concat(t.length," products"):e&&t.length<1?"No products found":void 0};return Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"container mb-3",children:Object(h.jsx)("div",{id:"search",children:Object(h.jsx)("form",{onSubmit:p,children:Object(h.jsxs)("span",{className:"input-group-text",children:[Object(h.jsxs)("div",{className:"input-group input-group-lg",children:[Object(h.jsx)("div",{className:"input-group-prepend",id:"catogory-select-parent",children:Object(h.jsxs)("select",{className:"btn mr-2",onChange:O("category"),id:"category-select",children:[Object(h.jsx)("option",{value:"All",id:"option-search",children:"All"}),r?r.map((function(e,t){return Object(h.jsx)("option",{value:e._id,children:e.name},t)})):Object(h.jsx)(h.Fragment,{})]})}),Object(h.jsx)("input",{type:"search",className:"form-control",id:"search-by-name",onChange:O("search"),placeholder:"Search by name"})]}),Object(h.jsx)("div",{className:"input-group-append ml-2",style:{border:"none"},children:Object(h.jsx)("button",{className:"input-group-text",id:"search-button",children:"Search"})})]})})})}),Object(h.jsx)("div",{className:"container-fluid mb-3",children:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{className:"mt-4 mb-4",children:x(b,e)}),Object(h.jsx)("div",{className:"row",children:e.map((function(e,t){return Object(h.jsx)("div",{className:"col-md-3 col-sm-6 col-xs-8 offset-xs-2 mb-3",children:Object(h.jsx)(_,{product:Object(l.a)(Object(l.a)({},e),{},{description:[e.description.substring(0,100)+"..."]})})})}))})]})}(u)})]})},D=c(62);c.p,c.p,c.p,c.p,c.p,c.p,c.p,c.p;function B(){return Object(h.jsx)("div",{children:Object(h.jsx)(D.a,{})})}var G=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(d.a)(r,2),o=s[0],i=s[1],j=Object(n.useState)(!1),u=Object(d.a)(j,2),b=(u[0],u[1]);return Object(n.useEffect)((function(){S("createdAt").then((function(e){console.log(e),e&&e.error?b(e.error):i(e)})),S("sold").then((function(e){e&&e.error?b(e.error):a(e)}))}),[]),Object(h.jsxs)(g,{title:"",description:"",className:"container-fluid",children:[Object(h.jsx)(B,{}),Object(h.jsx)(E,{}),Object(h.jsx)("h2",{className:"mb-4 home-h2-main font-weight-bolder text-center pb-2 h2",children:"New Arrivals"}),Object(h.jsx)("div",{className:"row",children:o?o.map((function(e,t){return Object(h.jsx)("div",{className:"col-lg-3 col-md-4 col-sm-6 col-xs-8 offset-xs-2 mb-3",children:Object(h.jsx)(_,{product:Object(l.a)(Object(l.a)({},e),{},{description:[e.description.substring(0,100)+"..."]})})},t)})):Object(h.jsx)(h.Fragment,{})}),Object(h.jsx)("h2",{className:"mb-4 home-h2 font-weight-bolder text-center pb-2 pt-2 h2",children:"Best Sellers"}),Object(h.jsx)("div",{className:"row",children:c?c.map((function(e,t){return Object(h.jsx)("div",{className:"col-lg-3 col-md-4 col-sm-6 col-xs-6  mb-3",children:Object(h.jsx)(_,{product:Object(l.a)(Object(l.a)({},e),{},{description:[e.description.substring(0,100)+"..."]})})},t)})):Object(h.jsx)(h.Fragment,{})})]})},J=c(30),U=function(e){var t=e.component,c=Object(J.a)(e,["component"]);return Object(h.jsx)(o.b,Object(l.a)(Object(l.a)({},c),{},{render:function(e){return u()?Object(h.jsx)(t,Object(l.a)({},e)):Object(h.jsx)(o.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},z=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],r=u().user,o=r._id,i=r.name,l=r.email,b=r.role,m=u().token,p=function(e,t){(function(e,t){return fetch("".concat(j,"/orders/by/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error?console.log(e.error):a(e)}))};Object(n.useEffect)((function(){p(o,m)}),[]);return Object(h.jsx)(g,{title:"Dashboard",description:"G'day ".concat(i,"!"),className:"container-fluid",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-3",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("h4",{className:"card-header",children:"User Links"}),Object(h.jsxs)("ul",{className:"list-group",children:[Object(h.jsx)("li",{className:"list-group-item",children:Object(h.jsx)(s.b,{className:"nav-link",to:"/cart",children:"My Cart"})}),Object(h.jsx)("li",{className:"list-group-item",children:Object(h.jsx)(s.b,{className:"nav-link",to:"/profile/".concat(o),children:"Update Profile"})})]})]})}),Object(h.jsxs)("div",{className:"col-9",children:[Object(h.jsxs)("div",{className:"card mb-5",children:[Object(h.jsx)("h3",{className:"card-header",children:"User Information"}),Object(h.jsxs)("ul",{className:"list-group",children:[Object(h.jsx)("li",{className:"list-group-item",children:i}),Object(h.jsx)("li",{className:"list-group-item",children:l}),Object(h.jsx)("li",{className:"list-group-item",children:1===b?"Admin":"Registered User"})]})]}),function(e){return Object(h.jsxs)("div",{className:"card mb-5",children:[Object(h.jsx)("h3",{className:"card-header",children:"Purchase history"}),Object(h.jsx)("ul",{className:"list-group",children:Object(h.jsx)("li",{className:"list-group-item",children:e.map((function(e,t){return Object(h.jsxs)("div",{children:[Object(h.jsx)("hr",{}),e.products.map((function(e,t){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("h6",{children:["Product name: ",e.name]}),Object(h.jsxs)("h6",{children:["Product price: $",e.price]}),Object(h.jsxs)("h6",{children:["Purchased date:"," ",I()(e.createdAt).fromNow()]})]},t)}))]})}))})})]})}(c)]})]})})},F=function(e){var t=e.component,c=Object(J.a)(e,["component"]);return Object(h.jsx)(o.b,Object(l.a)(Object(l.a)({},c),{},{render:function(e){return u()&&1===u().user.role?Object(h.jsx)(t,Object(l.a)({},e)):Object(h.jsx)(o.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},R=function(){var e=u().user,t=(e._id,e.name),c=e.email,n=e.role;return Object(h.jsx)(g,{title:"Dashboard",description:"G'day ".concat(t,"!"),className:"container-fluid",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-3",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("h4",{className:"card-header",children:"Admin Links"}),Object(h.jsxs)("ul",{className:"list-group",children:[Object(h.jsx)("li",{className:"list-group-item",children:Object(h.jsx)(s.b,{className:"nav-link",to:"/create/category",children:"Create Category"})}),Object(h.jsx)("li",{className:"list-group-item",children:Object(h.jsx)(s.b,{className:"nav-link",to:"/create/product",children:"Create Product"})}),Object(h.jsx)("li",{className:"list-group-item",children:Object(h.jsx)(s.b,{className:"nav-link",to:"/admin/orders",children:"View Orders"})}),Object(h.jsx)("li",{className:"list-group-item",children:Object(h.jsx)(s.b,{className:"nav-link",to:"/admin/products",children:"Manage Products"})})]})]})}),Object(h.jsx)("div",{className:"col-9",children:Object(h.jsxs)("div",{className:"card mb-5",children:[Object(h.jsx)("h3",{className:"card-header",children:"User Information"}),Object(h.jsxs)("ul",{className:"list-group",children:[Object(h.jsx)("li",{className:"list-group-item",children:t}),Object(h.jsx)("li",{className:"list-group-item",children:c}),Object(h.jsx)("li",{className:"list-group-item",children:1===n?"Admin":"Registered User"})]})]})})]})})},q=function(){return fetch("".concat(j,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},Y=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),o=Object(d.a)(r,2),i=o[0],l=o[1],b=Object(n.useState)(!1),m=Object(d.a)(b,2),p=m[0],O=m[1],x=u(),f=x.user,N=x.token,v=function(e){l(""),a(e.target.value)},y=function(e){e.preventDefault(),l(""),O(!1),function(e,t,c){return fetch("".concat(j,"/category/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(f._id,N,{name:c}).then((function(e){e.error?l(e.error):(l(""),O(!0))}))};return Object(h.jsx)(g,{title:"Add a new category",description:"G'day ".concat(f.name,", ready to add a new category?"),children:Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col-md-8 offset-md-2",children:[function(){if(p)return Object(h.jsxs)("h3",{className:"text-success",children:[c," is created"]})}(),function(){if(i)return Object(h.jsx)("h3",{className:"text-danger",children:"Category should be unique"})}(),Object(h.jsxs)("form",{onSubmit:y,children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Name"}),Object(h.jsx)("input",{type:"text",className:"form-control",onChange:v,value:c,autoFocus:!0,required:!0})]}),Object(h.jsx)("button",{className:"btn btn-outline-primary",children:"Create Category"})]}),Object(h.jsx)("div",{className:"mt-5",children:Object(h.jsx)(s.b,{to:"/admin/dashboard",className:"text-warning",children:"Back to Dashboard"})})]})})})},L=function(){var e=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:"",createdProduct:"",redirectToProfile:!1,formData:""}),t=Object(d.a)(e,2),c=t[0],a=t[1],r=u(),s=r.user,o=r.token,b=c.name,m=c.description,p=c.price,O=c.categories,x=(c.category,c.shipping,c.quantity),f=c.loading,N=c.error,v=c.createdProduct,y=(c.redirectToProfile,c.formData);Object(n.useEffect)((function(){q().then((function(e){e.error?a(Object(l.a)(Object(l.a)({},c),{},{error:e.error})):a(Object(l.a)(Object(l.a)({},c),{},{categories:e,formData:new FormData}))}))}),[]);var w=function(e){return function(t){var n="photo"===e?t.target.files[0]:t.target.value;y.set(e,n),a(Object(l.a)(Object(l.a)({},c),{},Object(i.a)({},e,n)))}},S=function(e){e.preventDefault(),a(Object(l.a)(Object(l.a)({},c),{},{error:"",loading:!0})),function(e,t,c){return fetch("".concat(j,"/product/create/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:c}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(s._id,o,y).then((function(e){e.error?a(Object(l.a)(Object(l.a)({},c),{},{error:e.error})):a(Object(l.a)(Object(l.a)({},c),{},{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,createdProduct:e.name}))}))};return Object(h.jsx)(g,{title:"Add a new product",description:"G'day ".concat(s.name,", ready to add a new product?"),children:Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col-md-8 offset-md-2",children:[f&&Object(h.jsx)("div",{className:"alert alert-success",children:Object(h.jsx)("h2",{children:"Loading..."})}),Object(h.jsx)("div",{className:"alert alert-info",style:{display:v?"":"none"},children:Object(h.jsxs)("h2",{children:["".concat(v)," is created!"]})}),Object(h.jsx)("div",{className:"alert alert-danger",style:{display:N?"":"none"},children:N}),Object(h.jsxs)("form",{className:"mb-3",onSubmit:S,children:[Object(h.jsx)("h4",{children:"Post Photo"}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("label",{className:"btn btn-secondary",children:Object(h.jsx)("input",{onChange:w("photo"),type:"file",name:"photo",accept:"image/*"})})}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Name"}),Object(h.jsx)("input",{onChange:w("name"),type:"text",className:"form-control",value:b})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Description"}),Object(h.jsx)("textarea",{onChange:w("description"),className:"form-control",value:m})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Price"}),Object(h.jsx)("input",{onChange:w("price"),type:"number",className:"form-control",value:p})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Category"}),Object(h.jsxs)("select",{onChange:w("category"),className:"form-control",children:[Object(h.jsx)("option",{children:"Please select"}),O&&O.map((function(e,t){return Object(h.jsx)("option",{value:e._id,children:e.name},t)}))]})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Shipping"}),Object(h.jsxs)("select",{onChange:w("shipping"),className:"form-control",children:[Object(h.jsx)("option",{children:"Please select"}),Object(h.jsx)("option",{value:"0",children:"No"}),Object(h.jsx)("option",{value:"1",children:"Yes"})]})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Quantity"}),Object(h.jsx)("input",{onChange:w("quantity"),type:"number",className:"form-control",value:x})]}),Object(h.jsx)("button",{className:"btn btn-outline-primary",children:"Create Product"})]})]})})})},M=c(27),H=function(e){var t=e.categories,c=e.handleFilters,a=Object(n.useState)([]),r=Object(d.a)(a,2),s=r[0],o=r[1],i=function(e){return function(){var t=s.indexOf(e),n=Object(M.a)(s);-1===t?n.push(e):n.splice(t,1),o(n),c(n)}};return t.map((function(e,t){return Object(h.jsxs)("li",{className:"list-unstyled",children:[Object(h.jsx)("input",{onChange:i(e._id),value:s.indexOf(-1===e._id),type:"checkbox",className:"form-check-input"}),Object(h.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))},V=function(e){var t=e.prices,c=e.handleFilters,a=Object(n.useState)(0),r=Object(d.a)(a,2),s=(r[0],r[1]),o=function(e){c(e.target.value),s(e.target.value)};return t.map((function(e,t){return Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{onChange:o,value:"".concat(e._id),name:e,type:"radio",className:"mr-2 ml-4"}),Object(h.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))},K=[{_id:0,name:"Any",array:[]},{_id:1,name:"\u20b90 to \u20b999",array:[0,99]},{_id:2,name:"\u20b9100 to \u20b9499",array:[100,499]},{_id:3,name:"\u20b9500 to \u20b9999",array:[500,999]},{_id:4,name:"\u20b930 to \u20b939",array:[999,1499]},{_id:5,name:"More than \u20b91500",array:[1500,5e3]}],Q=function(){var e=Object(n.useState)({filters:{category:[],price:[]}}),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(d.a)(r,2),o=s[0],i=s[1],j=Object(n.useState)(!1),u=Object(d.a)(j,2),b=(u[0],u[1]),m=Object(n.useState)(6),p=Object(d.a)(m,2),O=p[0],x=(p[1],Object(n.useState)(0)),f=Object(d.a)(x,2),N=f[0],v=f[1],y=Object(n.useState)(0),w=Object(d.a)(y,2),S=w[0],P=w[1],T=Object(n.useState)([]),A=Object(d.a)(T,2),I=A[0],E=A[1],D=function(e){C(N,O,e).then((function(e){e&&e.error?b(e.error):(E(e.data),P(e.size),v(0))}))},G=function(){var e=N+O;C(e,O,c.filters).then((function(t){t&&t.error?b(t.error):(E([].concat(Object(M.a)(I),Object(M.a)(t.data))),P(t.size),v(e))}))};Object(n.useEffect)((function(){k().then((function(e){e&&e.error?b(e.error):i(e)})),D(N,c.filters)}),[]);var J=function(e,t){var n=Object(l.a)({},c);if(n.filters[t]=e,"price"===t){var r=U(e);n.filters[t]=r}D(c.filters),a(n)},U=function(e){var t=K,c=[];for(var n in t)t[n]._id===parseInt(e)&&(c=t[n].array);return c};return Object(h.jsxs)(g,{title:"",description:"",className:"container-fluid",children:[Object(h.jsx)(B,{}),Object(h.jsxs)("div",{className:"row",id:"shop",children:[Object(h.jsxs)("div",{className:"col-lg-2 col-md-3 col-sm-4 col-xs-12 mt-4 choose-radio",children:[Object(h.jsx)("h4",{children:"Filter by categories"}),Object(h.jsx)("ul",{children:Object(h.jsx)(H,{categories:o,handleFilters:function(e){return J(e,"category")}})}),Object(h.jsx)("h4",{children:"Filter by price range"}),Object(h.jsx)("div",{id:"radio-button-shop",children:Object(h.jsx)(V,{prices:K,handleFilters:function(e){return J(e,"price")}})})]}),Object(h.jsxs)("div",{className:"col-lg-10 col-md-9 col-sm-8 col-xs-12",children:[Object(h.jsx)("h2",{className:"mb-4",children:"Products"}),Object(h.jsx)("div",{className:"row",children:I.map((function(e,t){return Object(h.jsx)("div",{className:"col-md-4 col-sm-6 col-xs-12 mb-3",children:Object(h.jsx)(_,{product:Object(l.a)(Object(l.a)({},e),{},{description:[e.description.substring(0,100)+"..."]})})},t)}))}),Object(h.jsx)("hr",{}),S>0&&S>=O&&Object(h.jsx)("button",{onClick:G,className:"btn btn-warning mb-5 font-weight-bold rounded",children:"Load more"})]})]})]})},W=function(e){var t=Object(n.useState)({}),c=Object(d.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)([]),o=Object(d.a)(s,2),i=o[0],l=o[1],u=Object(n.useState)(!1),b=Object(d.a)(u,2),m=(b[0],b[1]),p=function(e){(function(e){return fetch("".concat(j,"/product/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?m(e.error):(r(e),function(e){return fetch("".concat(j,"/products/related/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e._id).then((function(e){e.error?m(e.error):l(e)})))}))};return Object(n.useEffect)((function(){var t=e.match.params.productId;p(t)}),[e]),Object(h.jsx)(g,{title:a&&a.name,description:a&&a.description&&a.description.substring(0,100),className:"container-fluid",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-8",children:a&&a.description&&Object(h.jsx)(_,{product:a,showViewProductButton:!1})}),Object(h.jsxs)("div",{className:"col-4",children:[Object(h.jsx)("h4",{children:"Related products"}),i.map((function(e,t){return Object(h.jsx)("div",{className:"mb-3",children:Object(h.jsx)(_,{product:e})},t)}))]})]})})},$=c(61),X=c.n($),Z=function(e){var t=e.products,c=e.setRun,a=void 0===c?function(e){return e}:c,r=e.run,o=void 0===r?void 0:r,i=Object(n.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{},address:""}),m=Object(d.a)(i,2),p=m[0],O=m[1],x=u()&&u().user._id,f=u()&&u().token,g=function(e,t){(function(e,t){return fetch("".concat(j,"/braintree/getToken/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error?(console.log(e.error),O(Object(l.a)(Object(l.a)({},e),{},{error:e.error}))):(console.log(e),O({clientToken:e.clientToken}))}))};Object(n.useEffect)((function(){g(x,f)}),[]);var N,v,y,w=function(e){O(Object(l.a)(Object(l.a)({},p),{},{address:e.target.value}))},S=function(){return t.reduce((function(e,t){return e+t.count*t.price}),0)},k=p.address,C=function(e){for(var t="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=c.length,a=0;a<e;a++)t+=c.charAt(Math.floor(Math.random()*n));return t},T=function(){O({loading:!0});var e={id:C(12),amount:S()};P(x,f,{products:t,transaction_id:e.id,amount:e.amount,address:k}).then((function(e){b((function(){a(!o),console.log("payment success and empty cart"),O({loading:!1,success:!0})}))})).catch((function(e){console.log(e),O({loading:!1})}))},A=function(){return Object(h.jsx)("div",{onBlur:function(){return O(Object(l.a)(Object(l.a)({},p),{},{error:""}))},children:null!==p.clientToken&&t.length>0?Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"gorm-group mb-3",children:[Object(h.jsx)("label",{className:"text-muted",children:"Delivery address:"}),Object(h.jsx)("textarea",{onChange:w,className:"form-control",value:p.address,placeholder:"Type your delivery address here..."})]}),Object(h.jsx)(X.a,{options:{authorization:p.clientToken,paypal:{flow:"vault"}},onInstance:function(e){return p.instance=e}}),Object(h.jsx)("button",{onClick:T,className:"btn btn-success btn-block",children:"Pay"})]}):null})};return Object(h.jsxs)("div",{children:[Object(h.jsxs)("h2",{children:["Total: \u20b9",S()]}),(y=p.loading,y&&Object(h.jsx)("h2",{className:"text-danger",children:"Loading..."})),(v=p.success,Object(h.jsx)("div",{className:"alert alert-info",style:{display:v?"":"none"},children:"Thanks! Your payment was successful!"})),(N=p.error,Object(h.jsx)("div",{className:"alert alert-danger",style:{display:N?"":"none"},children:N})),u()?Object(h.jsx)("div",{children:A()}):Object(h.jsx)(s.b,{to:"/signin",children:Object(h.jsx)("button",{className:"btn btn-primary",children:"Sign in to checkout"})})]})},ee=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),o=Object(d.a)(r,2),i=o[0],l=o[1];Object(n.useEffect)((function(){a("undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])}),[i]);return Object(h.jsx)(g,{title:"Shopping Cart",description:"Manage your cart items. Add remove checkout or continue shopping.",className:"container-fluid",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-4 offset-1",children:Object(h.jsx)("div",{className:"cart-product-details",children:c.length>0?function(e){return Object(h.jsxs)("div",{id:"cart",children:[Object(h.jsxs)("h2",{id:"cart-with-item",children:["Your cart has ","".concat(e.length)," items"]}),Object(h.jsx)("hr",{}),e.map((function(e,t){return Object(h.jsx)(_,{product:e,showAddToCartButton:!1,cartUpdate:!0,showRemoveProductButton:!0,setRun:l,run:i},t)}))]})}(c):Object(h.jsxs)("h2",{id:"cart-empty",children:["Your cart is empty. ",Object(h.jsx)("br",{}),Object(h.jsx)("br",{})," ",Object(h.jsx)(s.b,{to:"/shop",children:"Continue shopping"})]})})}),Object(h.jsx)("div",{className:"col-5 offset-1",children:Object(h.jsxs)("div",{id:"cart-summery-box",className:"mb-4",children:[Object(h.jsx)("h2",{className:"mb-4",id:"cart-summery",children:"Your cart summary"}),Object(h.jsx)("hr",{}),Object(h.jsx)(Z,{products:c,setRun:l,run:i})]})})]})})},te=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(d.a)(r,2),o=s[0],i=s[1],l=u(),b=l.user,m=l.token,p=function(){(function(e,t){return fetch("".concat(j,"/order/list/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(b._id,m).then((function(e){e.error?console.log(e.error):a(e)}))},O=function(){(function(e,t){return fetch("".concat(j,"/order/status-values/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(b._id,m).then((function(e){e.error?console.log(e.error):i(e)}))};Object(n.useEffect)((function(){p(),O()}),[]);var x=function(e,t){return Object(h.jsxs)("div",{className:"input-group mb-2 mr-sm-2",children:[Object(h.jsx)("div",{className:"input-group-prepend",children:Object(h.jsx)("div",{className:"input-group-text",children:e})}),Object(h.jsx)("input",{type:"text",value:t,className:"form-control",readOnly:!0})]})},f=function(e,t){(function(e,t,c,n){return fetch("".concat(j,"/order/").concat(c,"/status/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({status:n,orderId:c})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(b._id,m,t,e.target.value).then((function(e){e.error?console.log("Status update failed"):p()}))},N=function(e){return Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsxs)("h3",{className:"mark mb-4",children:["Status: ",e.status]}),Object(h.jsxs)("select",{className:"form-control",onChange:function(t){return f(t,e._id)},children:[Object(h.jsx)("option",{children:"Update Status"}),o.map((function(e,t){return Object(h.jsx)("option",{value:e,children:e},t)}))]})]})};return Object(h.jsx)(g,{title:"Orders",description:"G'day ".concat(b.name,", you can manage all the orders here"),className:"container-fluid",children:Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col-md-8 offset-md-2",children:[c.length>0?Object(h.jsxs)("h1",{className:"text-danger display-2",children:["Total orders: ",c.length]}):Object(h.jsx)("h1",{className:"text-danger",children:"No orders"}),c.map((function(e,t){return Object(h.jsxs)("div",{className:"mt-5",style:{borderBottom:"5px solid indigo"},children:[Object(h.jsx)("h2",{className:"mb-5",children:Object(h.jsxs)("span",{className:"bg-primary",children:["Order ID: ",e._id]})}),Object(h.jsxs)("ul",{className:"list-group mb-2",children:[Object(h.jsx)("li",{className:"list-group-item",children:N(e)}),Object(h.jsxs)("li",{className:"list-group-item",children:["Transaction ID: ",e.transaction_id]}),Object(h.jsxs)("li",{className:"list-group-item",children:["Amount: $",e.amount]}),Object(h.jsxs)("li",{className:"list-group-item",children:["Ordered by: ",e.user.name]}),Object(h.jsxs)("li",{className:"list-group-item",children:["Ordered on:"," ",I()(e.createdAt).fromNow()]}),Object(h.jsxs)("li",{className:"list-group-item",children:["Delivery address: ",e.address]})]}),Object(h.jsxs)("h3",{className:"mt-4 mb-4 font-italic",children:["Total products in the order:"," ",e.products.length]}),e.products.map((function(e,t){return Object(h.jsxs)("div",{className:"mb-4",style:{padding:"20px",border:"1px solid indigo"},children:[x("Product name",e.name),x("Product price",e.price),x("Product total",e.count),x("Product Id",e._id)]},t)}))]},t)}))]})})})},ce=function(e){var t=e.match,c=Object(n.useState)({name:"",email:"",password:"",error:!1,success:!1}),a=Object(d.a)(c,2),r=a[0],s=a[1],b=u().token,m=r.name,p=r.email,O=r.password,x=(r.error,r.success),f=function(e){(function(e,t){return fetch("".concat(j,"/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,b).then((function(e){e.error?s(Object(l.a)(Object(l.a)({},r),{},{error:!0})):s(Object(l.a)(Object(l.a)({},r),{},{name:e.name,email:e.email}))}))};Object(n.useEffect)((function(){f(t.params.userId)}),[]);var N=function(e){return function(t){s(Object(l.a)(Object(l.a)({},r),{},Object(i.a)({error:!1},e,t.target.value)))}},v=function(e){e.preventDefault(),function(e,t,c){return fetch("".concat(j,"/user/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t.params.userId,b,{name:m,email:p,password:O}).then((function(e){e.error?alert(e.error):function(e,t){if("undefined"!==typeof window&&localStorage.getItem("jwt")){var c=JSON.parse(localStorage.getItem("jwt"));c.user=e,localStorage.setItem("jwt",JSON.stringify(c)),t()}}(e,(function(){s(Object(l.a)(Object(l.a)({},r),{},{name:e.name,email:e.email,success:!0}))}))}))};return Object(h.jsxs)(g,{title:"Profile",description:"Update your profile",className:"container-fluid",children:[Object(h.jsx)("h2",{className:"mb-4",children:"Profile update"}),function(e,t,c){return Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Name"}),Object(h.jsx)("input",{type:"text",onChange:N("name"),className:"form-control",value:e})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Email"}),Object(h.jsx)("input",{type:"email",onChange:N("email"),className:"form-control",value:t})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Password"}),Object(h.jsx)("input",{type:"password",onChange:N("password"),className:"form-control",value:c})]}),Object(h.jsx)("button",{onClick:v,className:"btn btn-primary",children:"Submit"})]})}(m,p,O),function(e){if(e)return Object(h.jsx)(o.a,{to:"/cart"})}(x)]})},ne=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],r=u(),o=r.user,i=r.token,l=function(){fetch("".concat(j,"/products?limit=undefined"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?console.log(e.error):a(e)}))},b=function(e){(function(e,t,c){return fetch("".concat(j,"/product/").concat(e,"/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(c)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,o._id,i).then((function(e){e.error?console.log(e.error):l()}))};return Object(n.useEffect)((function(){l()}),[]),Object(h.jsx)(g,{title:"Manage Products",description:"Perform CRUD on products",className:"container-fluid",children:Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col-12",children:[Object(h.jsxs)("h2",{className:"text-center",children:["Total ",c.length," products"]}),Object(h.jsx)("hr",{}),Object(h.jsx)("ul",{className:"list-group",children:c.map((function(e,t){return Object(h.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(h.jsx)("strong",{children:e.name}),Object(h.jsx)(s.b,{to:"/admin/product/update/".concat(e._id),children:Object(h.jsx)("span",{className:"badge badge-warning badge-pill",children:"Update"})}),Object(h.jsx)("span",{onClick:function(){return b(e._id)},className:"badge badge-danger badge-pill",children:"Delete"})]},t)}))}),Object(h.jsx)("br",{})]})})})},ae=function(e){var t=e.match,c=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:!1,createdProduct:"",redirectToProfile:!1,formData:""}),a=Object(d.a)(c,2),r=a[0],s=a[1],b=Object(n.useState)([]),m=Object(d.a)(b,2),p=m[0],O=m[1],x=u(),f=x.user,N=x.token,v=r.name,y=r.description,w=r.price,S=(r.category,r.shipping,r.quantity),k=r.loading,C=r.error,P=r.createdProduct,T=r.redirectToProfile,A=r.formData,I=function(e){(function(e){return fetch("".concat(j,"/product/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?s(Object(l.a)(Object(l.a)({},r),{},{error:e.error})):(s(Object(l.a)(Object(l.a)({},r),{},{name:e.name,description:e.description,price:e.price,category:e.category._id,shipping:e.shipping,quantity:e.quantity,formData:new FormData})),_())}))},_=function(){q().then((function(e){e.error?s(Object(l.a)(Object(l.a)({},r),{},{error:e.error})):O(e)}))};Object(n.useEffect)((function(){I(t.params.productId)}),[]);var E=function(e){return function(t){var c="photo"===e?t.target.files[0]:t.target.value;A.set(e,c),s(Object(l.a)(Object(l.a)({},r),{},Object(i.a)({},e,c)))}},D=function(e){e.preventDefault(),s(Object(l.a)(Object(l.a)({},r),{},{error:"",loading:!0})),function(e,t,c,n){return fetch("".concat(j,"/product/").concat(e,"/").concat(t),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(c)},body:n}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t.params.productId,f._id,N,A).then((function(e){e.error?s(Object(l.a)(Object(l.a)({},r),{},{error:e.error})):s(Object(l.a)(Object(l.a)({},r),{},{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,error:!1,redirectToProfile:!0,createdProduct:e.name}))}))};return Object(h.jsx)(g,{title:"Add a new product",description:"G'day ".concat(f.name,", ready to add a new product?"),children:Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col-md-8 offset-md-2",children:[k&&Object(h.jsx)("div",{className:"alert alert-success",children:Object(h.jsx)("h2",{children:"Loading..."})}),Object(h.jsx)("div",{className:"alert alert-info",style:{display:P?"":"none"},children:Object(h.jsxs)("h2",{children:["".concat(P)," is updated!"]})}),Object(h.jsx)("div",{className:"alert alert-danger",style:{display:C?"":"none"},children:C}),Object(h.jsxs)("form",{className:"mb-3",onSubmit:D,children:[Object(h.jsx)("h4",{children:"Post Photo"}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("label",{className:"btn btn-secondary",children:Object(h.jsx)("input",{onChange:E("photo"),type:"file",name:"photo",accept:"image/*"})})}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Name"}),Object(h.jsx)("input",{onChange:E("name"),type:"text",className:"form-control",value:v})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Description"}),Object(h.jsx)("textarea",{onChange:E("description"),className:"form-control",value:y})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Price"}),Object(h.jsx)("input",{onChange:E("price"),type:"number",className:"form-control",value:w})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Category"}),Object(h.jsxs)("select",{onChange:E("category"),className:"form-control",children:[Object(h.jsx)("option",{children:"Please select"}),p&&p.map((function(e,t){return Object(h.jsx)("option",{value:e._id,children:e.name},t)}))]})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Shipping"}),Object(h.jsxs)("select",{onChange:E("shipping"),className:"form-control",children:[Object(h.jsx)("option",{children:"Please select"}),Object(h.jsx)("option",{value:"0",children:"No"}),Object(h.jsx)("option",{value:"1",children:"Yes"})]})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-muted",children:"Quantity"}),Object(h.jsx)("input",{onChange:E("quantity"),type:"number",className:"form-control",value:S})]}),Object(h.jsx)("button",{className:"btn btn-outline-primary",children:"Update Product"})]}),function(){if(T&&!C)return Object(h.jsx)(o.a,{to:"/"})}()]})})})},re=function(e){var t=e.match,c=Object(n.useState)({name:"",error:"",redirectToProfile:!1,formData:""}),a=Object(d.a)(c,2),r=a[0],b=a[1],m=u(),p=m.user,O=m.token,x=r.name,f=r.error,N=r.redirectToProfile,v=function(e){(function(e){return fetch("".concat(j,"/category/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?b(Object(l.a)(Object(l.a)({},r),{},{error:e.error})):b(Object(l.a)(Object(l.a)({},r),{},{name:e.name}))}))};Object(n.useEffect)((function(){v(t.params.categoryId)}),[]);var y=function(e){return function(t){b(Object(l.a)(Object(l.a)({},r),{},Object(i.a)({error:!1},e,t.target.value)))}},w=function(e){e.preventDefault();var c={name:x};(function(e,t,c,n){return fetch("".concat(j,"/category/").concat(e,"/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(t.params.categoryId,p._id,O,c).then((function(e){e.error?b(Object(l.a)(Object(l.a)({},r),{},{error:e.error})):b(Object(l.a)(Object(l.a)({},r),{},{name:e.name,error:!1,redirectToProfile:!0}))}))};return Object(h.jsx)(g,{title:"Hi ".concat(p.name),description:"This is Update Product Action Page",className:"container-fluid",children:Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col-md-8 offset-md-2 m-b-250 mb-5",children:[Object(h.jsxs)("div",{className:"alert alert-danger",role:"alert",style:{display:f?"":"none"},children:[Object(h.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",children:Object(h.jsx)("span",{"aria-hidden":"true",children:"\xd7"})}),f]}),Object(h.jsx)("div",{className:"wrap-login100 p-l-85 p-r-85 p-t-55 p-b-55",children:Object(h.jsxs)("form",{className:"mb-5",onSubmit:w,children:[Object(h.jsx)("span",{className:"login100-form-title p-b-32 m-b-7",children:"Update Category Form"}),Object(h.jsx)("span",{className:"txt1 p-b-11",children:"Category Name"}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{className:"wrap-input100 validate-input m-b-36",children:Object(h.jsx)("input",{onChange:y("name"),value:x,className:"input100",type:"text",required:!0,name:"name"})}),Object(h.jsx)("div",{className:"w-size25",children:Object(h.jsx)("button",{type:"submit",className:"flex-c-m size2 bg1 bo-rad-23 hov1 m-text3 trans-0-4",children:"Save Changes"})})]})}),Object(h.jsx)("div",{className:"mt-5",children:Object(h.jsx)(s.b,{to:"/admin/categories",className:"text-info",children:"Back To Admin Home"})}),function(){if(N&&!f)return Object(h.jsx)(o.a,{to:"/admin/categories"})}()]})})})},se=function(){return Object(h.jsx)(s.a,{children:Object(h.jsxs)(o.d,{children:[Object(h.jsx)(o.b,{path:"/",exact:!0,component:G}),Object(h.jsx)(o.b,{path:"/shop",exact:!0,component:Q}),Object(h.jsx)(o.b,{path:"/signin",exact:!0,component:v}),Object(h.jsx)(o.b,{path:"/signup",exact:!0,component:N}),Object(h.jsx)(U,{path:"/user/dashboard",exact:!0,component:z}),Object(h.jsx)(F,{path:"/admin/dashboard",exact:!0,component:R}),Object(h.jsx)(F,{path:"/create/category",exact:!0,component:Y}),Object(h.jsx)(F,{path:"/create/product",exact:!0,component:L}),Object(h.jsx)(o.b,{path:"/product/:productId",exact:!0,component:W}),Object(h.jsx)(o.b,{path:"/cart",exact:!0,component:ee}),Object(h.jsx)(F,{path:"/admin/orders",exact:!0,component:te}),Object(h.jsx)(U,{path:"/profile/:userId",exact:!0,component:ce}),Object(h.jsx)(U,{path:"/admin/products",exact:!0,component:ne}),Object(h.jsx)(F,{path:"/admin/product/update/:productId",exact:!0,component:ae}),Object(h.jsx)(F,{path:"/admin/category/update/:categoryId",exact:!0,component:re})]})})};r.a.render(Object(h.jsx)(se,{}),document.getElementById("root"))},93:function(e,t,c){}},[[118,1,2]]]);
//# sourceMappingURL=main.479bbe92.chunk.js.map